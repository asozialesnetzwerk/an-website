{
  "version": 3,
  "sources": ["../../../swapped_words/swap.ts"],
  "sourcesContent": ["// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-3.0-or-later\nimport { PopStateHandlers, post } from \"../utils/utils.js\";\n\nconst textInput = document.getElementById(\"text\") as HTMLInputElement;\nconst configInput = document.getElementById(\n    \"config-textarea\",\n) as HTMLTextAreaElement;\nconst outputText = document.getElementById(\"output\")!;\nconst errorText = document.getElementById(\"error-msg\") as HTMLDivElement;\n\nif (errorText.innerHTML.trim()) {\n    alert(errorText.innerHTML.trim());\n}\n\ninterface SwappedWordsData { // this is a mix of error data and success data\n    stateType: string;\n    error: string | null;\n    line_num: number;\n    line: string;\n    text: string;\n    config: string;\n    replaced_text: string;\n}\n\nfunction ondata(\n    data: SwappedWordsData | undefined,\n    onpopstate = false,\n) {\n    if (!data) {\n        console.log(\"data is falsy!\");\n        return;\n    }\n    if (data.error) {\n        onerror(data);\n        return;\n    }\n    if (!onpopstate) {\n        data.stateType = \"swappedWords\";\n        window.history.pushState(\n            data,\n            \"Vertauschte WÃ¶rter\",\n            window.location.href,\n        );\n    }\n    textInput.value = data.text || \"\";\n    configInput.value = data.config || \"\";\n    outputText.innerText = data.replaced_text || \"\";\n    errorText.innerText = \"\";\n}\n\nfunction onerror(\n    e: { error: string | null; line_num: number; line: string },\n) {\n    console.error(e);\n    if (e.error) {\n        alert(e.error);\n        errorText.innerText = `${e.error} In line ${e.line_num}: \"${e.line}\"`;\n    } else {\n        alert(e);\n        errorText.innerText = JSON.stringify(e);\n    }\n}\n\n(document.getElementById(\"form\") as HTMLFormElement).onsubmit = (e) => {\n    e.preventDefault();\n};\n\n(document.getElementById(\"reset\")!).onclick = () =>\n    post(\n        \"/api/vertauschte-woerter\",\n        {\n            text: textInput.value,\n            minify_config: false,\n            return_config: true,\n        },\n        ondata,\n        onerror,\n    );\n\n(document.getElementById(\"submit\")!).onclick = () =>\n    post(\n        \"/api/vertauschte-woerter\",\n        {\n            text: textInput.value || \"\",\n            config: configInput.value || \"\",\n            minify_config: false,\n            return_config: true,\n        },\n        ondata,\n        onerror,\n    );\n\nPopStateHandlers[\"swappedWords\"] = (event: PopStateEvent) => {\n    event.state && ondata(event.state as SwappedWordsData, true);\n};\n// @license-end\n"],
  "mappings": "AAAA;AACA,OAAS,oBAAAA,EAAkB,QAAAC,MAAY,oBAEvC,MAAMC,EAAY,SAAS,eAAe,MAAM,EAC1CC,EAAc,SAAS,eACzB,iBACJ,EACMC,EAAa,SAAS,eAAe,QAAQ,EAC7CC,EAAY,SAAS,eAAe,WAAW,EAEjDA,EAAU,UAAU,KAAK,GACzB,MAAMA,EAAU,UAAU,KAAK,CAAC,EAapC,SAASC,EACLC,EACAC,EAAa,GACf,CACE,GAAI,CAACD,EAAM,CACP,QAAQ,IAAI,gBAAgB,EAC5B,MACJ,CACA,GAAIA,EAAK,MAAO,CACZE,EAAQF,CAAI,EACZ,MACJ,CACKC,IACDD,EAAK,UAAY,eACjB,OAAO,QAAQ,UACXA,EACA,qBACA,OAAO,SAAS,IACpB,GAEJL,EAAU,MAAQK,EAAK,MAAQ,GAC/BJ,EAAY,MAAQI,EAAK,QAAU,GACnCH,EAAW,UAAYG,EAAK,eAAiB,GAC7CF,EAAU,UAAY,EAC1B,CAEA,SAASI,EACL,EACF,CACE,QAAQ,MAAM,CAAC,EACX,EAAE,OACF,MAAM,EAAE,KAAK,EACbJ,EAAU,UAAY,GAAG,SAAE,MAAK,aAAY,SAAE,SAAQ,OAAM,SAAE,KAAI,OAElE,MAAM,CAAC,EACPA,EAAU,UAAY,KAAK,UAAU,CAAC,EAE9C,CAEC,SAAS,eAAe,MAAM,EAAsB,SAAY,GAAM,CACnE,EAAE,eAAe,CACrB,EAEC,SAAS,eAAe,OAAO,EAAI,QAAU,IAC1CJ,EACI,2BACA,CACI,KAAMC,EAAU,MAChB,cAAe,GACf,cAAe,EACnB,EACAI,EACAG,CACJ,EAEH,SAAS,eAAe,QAAQ,EAAI,QAAU,IAC3CR,EACI,2BACA,CACI,KAAMC,EAAU,OAAS,GACzB,OAAQC,EAAY,OAAS,GAC7B,cAAe,GACf,cAAe,EACnB,EACAG,EACAG,CACJ,EAEJT,EAAiB,aAAmBU,GAAyB,CACzDA,EAAM,OAASJ,EAAOI,EAAM,MAA2B,EAAI,CAC/D,EACA;",
  "names": ["PopStateHandlers", "post", "textInput", "configInput", "outputText", "errorText", "ondata", "data", "onpopstate", "onerror", "event"]
}
