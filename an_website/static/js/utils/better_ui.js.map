{
  "version": 3,
  "sources": ["../../../utils/better_ui.ts"],
  "sourcesContent": ["// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-3.0-or-later\nexport {};\n\n// these functions break if using the CSS-only functionality of the site-pane\nexport function showSitePane() {\n    document.getElementById(\"site-pane\")?.setAttribute(\"open\", \"\");\n}\nexport function hideSitePane() {\n    document.getElementById(\"site-pane\")?.removeAttribute(\"open\");\n}\n\nconst openPane = document.getElementById(\"open-pane\");\nconst sitePane = document.getElementById(\"site-pane\");\n\nif (!openPane || !sitePane) {\n    throw Error(\"open-pane or site-pane not found\");\n}\n\nconst belongsToSitePane = (el: HTMLElement) => (\n    el === openPane || el === sitePane || sitePane.contains(el)\n);\n\n// mouse users\nopenPane.onmouseover = showSitePane;\nsitePane.onmouseleave = hideSitePane;\n\n// keyboard users\ndocument.onfocus = (event: FocusEvent) => {\n    if (belongsToSitePane(event.target as HTMLElement)) {\n        showSitePane();\n    } else {\n        hideSitePane();\n    }\n};\n\n// phone users\nopenPane.onclick = showSitePane;\ndocument.onclick = (e) => {\n    belongsToSitePane(e.target as HTMLElement) || hideSitePane();\n};\n\n// swipe gestures (for phone users)\nconst startPos: { x: number | null; y: number | null } = {\n    x: null,\n    y: null,\n};\ndocument.ontouchstart = (e) => {\n    // save start pos of touch\n    // @ts-expect-error TS2532\n    startPos.x = e.touches[0].clientX;\n    // @ts-expect-error TS2532\n    startPos.y = e.touches[0].clientY;\n};\ndocument.ontouchmove = (e) => {\n    if (startPos.x === null || startPos.y === null) {\n        return;\n    }\n    // calculate difference\n    // @ts-expect-error TS2532\n    const diffX = startPos.x - e.touches[0].clientX;\n    // @ts-expect-error TS2532\n    const diffY = startPos.y - e.touches[0].clientY;\n\n    // early return if just clicked, not swiped\n    if (diffX === 0 && diffY === 0) {\n        return;\n    }\n\n    // reset start pos\n    startPos.x = null;\n    startPos.y = null;\n\n    const minDiffX = Math.max(12, 0.01 * window.screen.width, diffY * 1.5);\n\n    console.debug({ diffX, minDiffX });\n\n    if (Math.abs(diffX) >= minDiffX) {\n        diffX > 0 ? showSitePane() : hideSitePane();\n    }\n};\n// @license-end\n"],
  "mappings": "AAAA;AACA,SAGO,gBAAS,cAAe,CAJ/B,IAAAA,GAKIA,EAAA,SAAS,eAAe,WAAW,IAAnC,MAAAA,EAAsC,aAAa,OAAQ,GAC/D,CACO,gBAAS,cAAe,CAP/B,IAAAA,GAQIA,EAAA,SAAS,eAAe,WAAW,IAAnC,MAAAA,EAAsC,gBAAgB,OAC1D,CAEA,MAAMC,EAAW,SAAS,eAAe,WAAW,EAC9CC,EAAW,SAAS,eAAe,WAAW,EAEpD,GAAI,CAACD,GAAY,CAACC,EACd,MAAM,MAAM,kCAAkC,EAGlD,MAAMC,EAAqBC,GACvBA,IAAOH,GAAYG,IAAOF,GAAYA,EAAS,SAASE,CAAE,EAI9DH,EAAS,YAAc,aACvBC,EAAS,aAAe,aAGxB,SAAS,QAAWG,GAAsB,CAClCF,EAAkBE,EAAM,MAAqB,EAC7C,aAAa,EAEb,aAAa,CAErB,EAGAJ,EAAS,QAAU,aACnB,SAAS,QAAW,GAAM,CACtBE,EAAkB,EAAE,MAAqB,GAAK,aAAa,CAC/D,EAGA,MAAMG,EAAmD,CACrD,EAAG,KACH,EAAG,IACP,EACA,SAAS,aAAgB,GAAM,CAG3BA,EAAS,EAAI,EAAE,QAAQ,CAAC,EAAE,QAE1BA,EAAS,EAAI,EAAE,QAAQ,CAAC,EAAE,OAC9B,EACA,SAAS,YAAe,GAAM,CAC1B,GAAIA,EAAS,IAAM,MAAQA,EAAS,IAAM,KACtC,OAIJ,MAAMC,EAAQD,EAAS,EAAI,EAAE,QAAQ,CAAC,EAAE,QAElCE,EAAQF,EAAS,EAAI,EAAE,QAAQ,CAAC,EAAE,QAGxC,GAAIC,IAAU,GAAKC,IAAU,EACzB,OAIJF,EAAS,EAAI,KACbA,EAAS,EAAI,KAEb,MAAMG,EAAW,KAAK,IAAI,GAAI,IAAO,OAAO,OAAO,MAAOD,EAAQ,GAAG,EAErE,QAAQ,MAAM,CAAE,MAAAD,EAAO,SAAAE,CAAS,CAAC,EAE7B,KAAK,IAAIF,CAAK,GAAKE,IACnBF,EAAQ,EAAI,aAAa,EAAI,aAAa,EAElD,EACA;",
  "names": ["_a", "openPane", "sitePane", "belongsToSitePane", "el", "event", "startPos", "diffX", "diffY", "minDiffX"]
}
