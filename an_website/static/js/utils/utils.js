// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-3.0-or-later
var s=window.document;let c=String(location);export function setLastLocation(t){c=t}export function post(t,n={},a=console.log,o=console.error,e="application/json"){return fetch(t,{method:"POST",body:JSON.stringify(n),headers:{Accept:e,"Content-Type":"application/json"}}).then(r=>r.json()).catch(o).then(a).catch(o)}export function get(t,n={},a=console.log,o=console.error,e="application/json"){const r=new URLSearchParams(n).toString();return fetch(r?"".concat(t,"?").concat(r):t,{method:"GET",headers:{Accept:e}}).then(i=>i.json()).catch(o).then(a).catch(o)}export const PopStateHandlers={URLParamChange:()=>{location.reload()}};export function setURLParam(t,n,a,o="URLParamChange",e=!0){return setMultipleURLParams([[t,n]],a,o,e)}export function setMultipleURLParams(t,n,a="URLParamChange",o=!0){const e=new URLSearchParams(location.search);for(const[i,l]of t)e.set(i,l);const r="".concat(location.origin).concat(location.pathname,"?").concat(e.toString());return n.stateType=a,o&&r!==location.href?history.pushState(n,r,r):history.replaceState(n,r,r),c=location.href,r}function u(){if(location.hash==="")return;const t=s.getElementById("header");if(!t)return;const n=s.querySelector(location.hash);n&&scrollBy(0,n.getBoundingClientRect().top-Math.floor(parseFloat(getComputedStyle(t).height)))}setTimeout(u,4);window.onhashchange=u;window.onpopstate=t=>{if(c.split("#")[0]===location.href.split("#")[0]){c=location.href,u();return}if(t.state){const n=t.state,a=PopStateHandlers[n.stateType];if(a){t.preventDefault(),a(t),c=location.href,u();return}else console.error("Couldn't find state handler for state",n)}console.error("Couldn't handle state. ",t.state),c=location.href,location.reload()};export function showSitePane(){var t;(t=s.getElementById("site-pane"))==null||t.setAttribute("open","")}export function hideSitePane(){var t;(t=s.getElementById("site-pane"))==null||t.removeAttribute("open")}(()=>{const t=s.getElementById("open-pane"),n=s.getElementById("site-pane");if(!t||!n)throw Error("open-pane or site-pane not found");const a=e=>e===t||e===n||n.contains(e);t.onmouseover=showSitePane,n.onmouseleave=hideSitePane,s.onfocus=e=>{a(e.target)?showSitePane():hideSitePane()},t.onclick=showSitePane,s.onclick=e=>{a(e.target)||hideSitePane()};const o={x:null,y:null};s.ontouchstart=e=>{o.x=e.touches[0].clientX,o.y=e.touches[0].clientY},s.ontouchmove=e=>{if(o.x===null||o.y===null)return;const r=o.x-e.touches[0].clientX,i=o.y-e.touches[0].clientY;if(r===0&&i===0)return;o.x=null,o.y=null;const l=Math.max(12,.01*screen.width,i*1.5);Math.abs(r)>=l&&(r>0?showSitePane():hideSitePane())}})();// @license-end
//# sourceMappingURL=utils.js.map
